{% extends 'base.html.twig' %}

{% block title %}- {{post.title}}{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row justify-content-center align-items-center mx-auto">
        <div class="col-lg-5 col-md-12 col-sm-12">
            <img class="card-img-top" src="{{post.imageLink}}" alt="{{post.imageAlt}}">
        </div>
        <div class="col-lg-7 col-md-12 col-sm-12 text-center">
            <div class="row justify-content-center align-items-center">
                {% for tag in post.tags|slice(0, 2) %}
                <div class="col-auto">
                    <p class="card-title title-tag">{{tag.title}}</p>
                </div>
                {% endfor %}
            </div>
            <h1 class="mt-0">{{post.title}}</h1>
            {% set intro = post.content[:350] ~ '...' %}
            <p>{{intro|raw}}</p>
            <div class="mt-5">
                <small class="footer-section-article pt-2 small-text">
                    {{post.createdAt|date("d M Y")}}
                    - <i class="far fa-clock"></i> {{post.readingTime}}'
                </small>
            </div>
            <div class="row justify-content-center align-items-center mt-3">
                <div class="col-auto">
                    <a href="{{ path('app_post_like', {'id' : post.id }) }}" class="btn rs-btn-post js-like">
                        <div class="position-rs-post">
                            {% if post.isLikedByClient(app.request.server.get("REMOTE_ADDR")) %}
                            <i class="fas fa-heart"></i>
                            {% else %}
                            <i class="far fa-heart"></i>
                            {% endif %}
                            <span class="js-link-count">{{ post.likes | length }}</span>
                        </div>
                    </a>
                </div>
                <div class="col-auto">
                    <div class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/"
                        data-size="small">
                        <a target="_blank"
                            href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse"
                            class="fb-xfbml-parse-ignore">
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="jumbotron">
            <hr>
            <p>{{post.content|raw}}</p>
        </div>
    </div>
</div>
{% if suggestions is not empty %}
<div class="container-fluid bg-whitesmoke mb-5 mt-5">
    <div class="row">
        <div class="col-auto group-title-rectangle">
            <h2 class="title-rectangle">POSTS SIMILAIRES</h2>
        </div>
    </div>
    <div class="row" id="scroll-section">
        {% for post in suggestions %}
        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-3 col-xs-3 card-scrolled">
            <div class="m-2">
                <a href="{{path('app_post', {'slug' : post.slug })}}">
                    {% if post.imageLink %}
                    <img src="{{post.imageLink}}" class="card-img-top" alt="{{post.imageAlt}}">
                    {% endif %}
                    <div class="bg-black">
                        <h3 class="title-suggestion-post">{{post.title}}</h3>
                    </div>
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}

{% block javascripts %}
<script src="{{asset('assets/js/handleLike.js')}}"></script>
{% endblock %}