{% extends 'base.html.twig' %}

{% block title %}- {{post.title}}{% endblock %}

{% block body %}
<div class="container">
    <div class="float-end">
        <a href="{{path('app_posts')}}">All Posts</a>
    </div>
    <div class="row">
        <div class="jumbotron">
            <h2 class="card-title">{{post.title}}</h2>
            <p class="card-text">
                <p>{{post.content|raw}}</p>
                <small>
                    {% for tag in post.tags %}
                    <a href="{{ path('app_posts', {'tag' : tag.title }) }}">#{{tag.title}}</a>
                    {% endfor %}
                </small>
                <div class="float-end">
                    <a href="{{ path('app_post_like', {'id' : post.id }) }}" class="btn btn-primary js-like">
                        {% if post.isLikedByClient(app.request.server.get("REMOTE_ADDR")) %}
                        <i class="fas fa-thumbs-up"></i>
                        {% else %}
                        <i class="far fa-thumbs-up"></i>
                        {% endif %}
                        <span class="js-link-count">{{ post.likes | length }}</span>
                        {% if post.isLikedByClient(app.request.server.get("REMOTE_ADDR")) %}
                        <span class="js-link-label">JE N'AIME PLUS</span>
                        {% else %}
                        <span class="js-link-label">J'AIME</span>
                        {% endif %}
                    </a>
                </div>
            </p>
            <div class="row">
                <div class="col-3">
                    <div class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/" data-size="small">
                        <a target="_blank"
                            href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse"
                            class="fb-xfbml-parse-ignore">
                            Partager
                        </a>
                    </div>
                </div>
                <div class="col-9">
                    <div class="row">
                    <h6>You might like this posts :</h6>
                    {% for post in suggestions %}
                        <div class="col-4">
                            <div class="card p-3">
                                <a href="{{path('app_post', {'slug' : post.slug })}}">{{post.title}}</a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
<script src="{{asset('assets/js/handleLike.js')}}"></script>
{% endblock %}